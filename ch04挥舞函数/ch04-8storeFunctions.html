<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>List4.6 验证内联函数标识</title>
    <script type="text/javascript" src="../scripts/assert.js"></script>
    <link href="../styles/assert.css" rel="stylesheet" type="text/css">
</head>
<body>
<script>
   var store = {
       nextId:1,
       cache:{},
       add:function (fn) {
           if(!fn.id) {
               fn.id = this.nextId++;
               return !!(this.cache[fn.id] = fn);
           }
       }
   };


   function ninja() {

   }

   assert(store.add(ninja),
            "Function was safely added.");

   assert(!store.add(ninja),
       "But it was only added once.");
</script>
</body>
</html>